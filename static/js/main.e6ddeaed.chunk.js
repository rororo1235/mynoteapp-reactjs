(this.webpackJsonpmynoteapp=this.webpackJsonpmynoteapp||[]).push([[0],{24:function(e,t,a){e.exports=a(38)},29:function(e,t,a){},30:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),l=(a(29),a(1)),s=a(2),i=a(4),u=a(3),d=a(5),m=(a(30),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"My Note App"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("a",{className:"nav-link",href:"/"},"Home",r.a.createElement("span",{className:"sr-only"},"(current)")))))))}}]),t}(n.Component)),p=function(){return r.a.createElement("footer",{className:"py-5 bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"m-0 text-center text-white"},"Copyright \xa9 Your Website 2019")))},b=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.address;return r.a.createElement("nav",{"aria-label":"breadcrumb"},r.a.createElement("ol",{className:"breadcrumb bg-light border-bottom"},r.a.createElement("li",{className:"breadcrumb-item"},"My Note App"),e.map((function(t,a){return a===e.length-1?r.a.createElement("li",{key:a,className:"breadcrumb-item active","aria-current":"page"},t):r.a.createElement("li",{key:a,className:"breadcrumb-item"},t)}))))}}]),t}(n.Component),h=a(6),f="SORT_TITLE_ASC",E="SORT_TITLE_DESC",y="SORT_DATE_ASC",v="SORT_DATE_DESC",O=a(16),N=a.n(O),g=(a(35),{apiKey:"AIzaSyCsvX7RdDeDk_Pu7oF0iljd9drSgyM6r5M",authDomain:"note-react-e1434.firebaseapp.com",databaseURL:"https://note-react-e1434.firebaseio.com",projectId:"note-react-e1434",storageBucket:"note-react-e1434.appspot.com",messagingSenderId:"575571829147",appId:"1:575571829147:web:2a0c70aa0f5f2e1822013e"});N.a.initializeApp(g);var S=N.a.database().ref("/noteData"),j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).handleOpenEdit=function(e,t){e.key=t,a.props.enterEditMode(e)},a.handleDelete=function(e){window.confirm("Are you sure ?")&&a.props.deleteFunc(e)},a.renderNewFlag=function(e){if(Math.round((new Date).getTime()/1e3)-e<43200)return r.a.createElement("span",{className:"badge badge-danger badge-pill"},"new")},a.renderDateTime=function(e){var t=new Date(1e3*e);return r.a.createElement("abbr",{title:t},t.toLocaleDateString())},a.renderEditBtn=function(){return a.props.disableEditBtn?r.a.createElement("button",{type:"button",disabled:!0,className:"btn btn-sm btn-outline-secondary"},"Edit"):r.a.createElement("button",{type:"button",onClick:function(){return a.handleOpenEdit(a.props.data,a.props.idItem)},className:"btn btn-sm btn-outline-secondary"},"Edit")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data,a=t.title,n=t.lastEditDate,c=t.content;return r.a.createElement("div",{className:"card shadow-sm"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},a," ",this.renderNewFlag(n)),r.a.createElement("p",{className:"card-text mb-1"},c),r.a.createElement("small",{className:"text-muted"},"Last updated:  ",this.renderDateTime(n)),r.a.createElement("div",{className:"btn-group mt-1 d-block",role:"group"},this.renderEditBtn(),r.a.createElement("button",{onClick:function(){return e.handleDelete(e.props.idItem)},type:"button",className:"btn btn-sm btn-outline-secondary"},"Delete"))))}}]),t}(n.Component),D=Object(h.b)(null,(function(e){return{deleteFunc:function(t){return e((a=t,function(e){S.child(a).remove(),e({type:"DELETE",noteId:a})}));var a},enterEditMode:function(t){e({type:"TURN_EDIT_ON",itemEdit:t})}}}))(j),w=function(){return r.a.createElement("p",null,r.a.createElement("span",{className:"spinner-border text-secondary",role:"status"})," Loading")},k=function(e,t){var a=[];return Object.keys(e).forEach((function(t){a.push([t,e[t]])})),a.sort((function(e,a){return t(e[1],a[1])})),Object.fromEntries(a)},T=function(e){return k(e,(function(e,t){return e.title.localeCompare(t.title)}))},M=function(e){return k(e,(function(e,t){return t.title.localeCompare(e.title)}))},_=function(e){return k(e,(function(e,t){return t.lastEditDate-e.lastEditDate}))},C=function(e){return k(e,(function(e,t){return e.lastEditDate-t.lastEditDate}))},A=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getResultSearch=function(e,t){var a={};return Object.keys(t).forEach((function(n){-1===t[n].title.search(e)&&-1===t[n].content.search(e)||(a[n]=t[n])})),a},a.getResultSort=function(e,t){switch(e){case f:return T(t);case E:return M(t);case y:return _(t);case v:return C(t);default:return t}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getNotes()}},{key:"render",value:function(){var e=this,t=this.props,a=t.noteData,n=t.isLoading,c=t.searchKey,o=t.sortMode;return null!==c&&(a=this.getResultSearch(c,a)),null!==o&&(a=this.getResultSort(o,a)),n?r.a.createElement("div",{className:"card-columns px-3 vh-100 d-flex align-items-center justify-content-center"},r.a.createElement(w,null)):0===Object.entries(a).length?r.a.createElement("div",{className:"card-columns px-3 vh-100 d-flex justify-content-center"},r.a.createElement("p",{className:"font-italic"},"There is 0 result.")):r.a.createElement("div",{className:"card-columns px-3 min-vh-100"},Object.keys(a).map((function(t){return r.a.createElement(D,{key:t,idItem:t,data:a[t],disableEditBtn:null!==e.props.isEditMode})})))}}]),t}(n.Component),R=Object(h.b)((function(e,t){return{noteData:e.noteData.data,isLoading:e.noteData.isLoading,isEditMode:e.appStatus.isEditMode,searchKey:e.appStatus.isSearchMode,sortMode:e.appStatus.isSortMode}}),(function(e){return{getNotes:function(){e((function(e){S.on("value",(function(t){e({type:"GET_ALL",payload:t.val()})}))}))}}}))(A),F=a(8),x=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){a.setState(Object(F.a)({},e.target.name,e.target.value))},a.handleSearchSubmit=function(e){e.preventDefault(),a.state.searchKey&&""!==a.state.searchKey.trim()&&a.props.turnSearchOn(a.state.searchKey)},a.handleCancel=function(e){e.target.reset(),a.props.cancelSearch(),a.setState({searchKey:""})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return this.props.isLoading?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},"View Setting")),r.a.createElement("div",{className:"card-body d-flex align-items-center justify-content-center"},r.a.createElement(w,null))):r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},"View Setting")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"search-form"},r.a.createElement("form",{onSubmit:function(t){return e.handleSearchSubmit(t)},onReset:function(t){return e.handleCancel(t)}},r.a.createElement("input",{required:!0,onChange:function(t){return e.handleChange(t)},name:"searchKey",type:"text",className:"form-control mr-2",placeholder:"Search key ..."}),r.a.createElement("div",{className:"float-right btn-group mt-2"},null!==this.props.searchKey?r.a.createElement("button",{type:"reset",className:"btn btn-secondary"},"Cancel"):null,r.a.createElement("button",{type:"submit",className:"order-last btn btn-secondary "},"Search"))),r.a.createElement("button",{className:"mt-2 btn btn-outline-secondary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Sort"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("button",{className:"dropdown-item btn",onClick:function(){return e.props.turnSortOn(f)}},"Title A-Z"),r.a.createElement("button",{className:"dropdown-item btn",onClick:function(){return e.props.turnSortOn(E)}},"Title Z-A"),r.a.createElement("button",{className:"dropdown-item btn",onClick:function(){return e.props.turnSortOn(y)}},"Date asc"),r.a.createElement("div",{role:"separator",className:"dropdown-divider"}),r.a.createElement("button",{className:"dropdown-item btn",onClick:function(){return e.props.cancelSort()}},"Reset sort")))))}}]),t}(n.Component),I=Object(h.b)((function(e,t){return{isLoading:e.noteData.isLoading,searchKey:e.appStatus.isSearchMode}}),(function(e){return{turnSearchOn:function(t){return e({type:"TURN_SEARCH_ON",keyword:t})},cancelSearch:function(){return e({type:"TURN_SEARCH_OFF"})},cancelSort:function(){return e({type:"TURN_SORT_OFF"})},turnSortOn:function(t){return e({type:"TURN_SORT_ON",modeName:t})}}}))(x),L=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card my-2"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},"Action")),r.a.createElement("div",{className:"card-body"},r.a.createElement("button",{className:"btn btn-block btn-primary",onClick:this.props.showNoteForm},"Add"),r.a.createElement("button",{className:"btn btn-block btn-danger"},"Clear all")))}}]),t}(n.Component),P=Object(h.b)(null,(function(e){return{showNoteForm:function(){e({type:"TURN_ADD_ON"})}}}))(L),U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(e){e.preventDefault(),null!=a.props.editModel?a.props.cancelEdit():a.props.cancelAdd()},a.handleChange=function(e){a.setState(Object(F.a)({},e.target.name,e.target.value))},a.handleSubmitAdd=function(e){try{var t=a.state,n=t.title,r=t.content;a.props.addNewFunc({title:n,content:r}),e.target.reset(),a.setState({title:null,content:null})}catch(c){}},a.handleSubmitEdit=function(){try{var e=a.state,t=e.title,n=e.content;t.toString(),n.toString()}catch(o){t||(t=a.props.editModel.title),n||(n=a.props.editModel.content)}var r={},c=(new Date).getTime()/1e3;r[a.props.editModel.key]={title:t,content:n,lastEditDate:c},a.props.editSaveFunc(r)},a.handleSubmit=function(e){e.preventDefault(),null!=a.props.editModel?(a.handleSubmitEdit(),a.props.cancelEdit()):a.handleSubmitAdd(e)},a.renderValue=function(e){return e||""},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t="Add";if(null!=this.props.editModel){var a=this.props.editModel,n=a.key,c=a.title,o=a.content;t="Edit"}return r.a.createElement("div",{className:"card my-2 border-primary"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},t)),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{type:"hidden",value:this.renderValue(n)}),r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{required:!0,defaultValue:this.renderValue(c),type:"text",className:"form-control",name:"title",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("label",{htmlFor:"content"},"Content"),r.a.createElement("textarea",{required:!0,onChange:function(t){return e.handleChange(t)},rows:6,type:"text",className:"form-control",name:"content",defaultValue:this.renderValue(o)}),r.a.createElement("button",{type:"submit",className:"mt-3 btn btn-block btn-outline-primary"},"Save"),r.a.createElement("button",{type:"reset",className:"btn btn-block btn-outline-secondary"},"Reset form"),r.a.createElement("button",{onClick:function(t){return e.handleCancel(t)},className:"btn btn-block btn-light"},"Cancel"))))}}]),t}(n.Component),K=Object(h.b)((function(e){return{editModel:e.appStatus.isEditMode}}),(function(e){return{cancelAdd:function(){return e({type:"TURN_ADD_OFF"})},addNewFunc:function(t){return e((a=t,function(e){a.lastEditDate=(new Date).getTime()/1e3;var t={};t[S.push(a).getKey()]=a,e({type:"ADD_NEW",newItem:t})}));var a},editSaveFunc:function(t){return e((a=t,function(e){console.log(a),S.update(a),e({type:"EDIT",item:a})}));var a},cancelEdit:function(){return e({type:"TURN_EDIT_OFF"})}}}))(U),V=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=[];return null!==this.props.status.isSearchMode&&e.push("Search '"+this.props.status.isSearchMode+"'"),null!==this.props.status.isSortMode&&e.push("Sort"),this.props.status.isAddMode&&e.push("Add"),null!==this.props.status.isEditMode&&e.push("Edit"),r.a.createElement("div",{className:"bg-light text-dark"},r.a.createElement(m,null),r.a.createElement("div",{className:"container mt-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8 col-12 mb-3 px-2"},r.a.createElement("div",{className:"bg-white border rounded shadow-sm"},r.a.createElement(b,{address:e}),r.a.createElement(R,null))),r.a.createElement("div",{className:"col-sm-4 px-2"},r.a.createElement(I,null),this.props.status.isAddMode||null!=this.props.status.isEditMode?r.a.createElement(K,null):r.a.createElement(P,null)))),r.a.createElement(p,null))}}]),t}(n.Component),B=Object(h.b)((function(e,t){return{status:e.appStatus}}))(V);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=a(9);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach((function(t){Object(F.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z={isLoading:!0,data:{}};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(F.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z={isAddMode:!1,isEditMode:null,isSearchMode:null,isSortMode:null},X=Object(H.c)({noteData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,a=e.data;switch(t.type){case"GET_ALL":return q({},e,{data:t.payload,isLoading:!1});case"ADD_NEW":return q({},e,{data:Object.assign(t.newItem,e.data)});case"DELETE":return Object.keys(a).filter((function(e){return e===t.noteId})).forEach((function(e){return delete a[e]})),q({},e,{data:a});case"EDIT":var n=Object.keys(t.item)[0];return a[n]=t.item[n],q({},e,{data:a});default:return e}},appStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TURN_ADD_ON":return J({},e,{isAddMode:!0});case"TURN_ADD_OFF":return J({},e,{isAddMode:!1});case"TURN_EDIT_OFF":return J({},e,{isEditMode:null});case"TURN_EDIT_ON":return J({},e,{isEditMode:t.itemEdit,isAddMode:!1});case"TURN_SEARCH_OFF":return J({},e,{isSearchMode:null});case"TURN_SEARCH_ON":return J({},e,{isSearchMode:t.keyword});case"TURN_SORT_ON":return J({},e,{isSortMode:t.modeName});case"TURN_SORT_OFF":return J({},e,{isSortMode:null});default:return e}}}),Y=a(23),$=Object(H.d)(X,Object(H.a)(Y.a));o.a.render(r.a.createElement(h.a,{store:$},r.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.e6ddeaed.chunk.js.map