(this.webpackJsonpmynoteapp=this.webpackJsonpmynoteapp||[]).push([[0],{120:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),o=n.n(c),s=(n(60),n(2)),l=n(3),i=n(5),u=n(4),d=n(6),m=(n(61),function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"My Note App"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarResponsive"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("a",{className:"nav-link",href:"/"},"Home",r.a.createElement("span",{className:"sr-only"},"(current)")))))))}}]),t}(a.Component)),p=function(){return r.a.createElement("footer",{className:"py-5 bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"m-0 text-center text-white"},"Copyright \xa9 Your Website 2019")))},b=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.address;return r.a.createElement("nav",{"aria-label":"breadcrumb"},r.a.createElement("ol",{className:"breadcrumb bg-light border-bottom"},r.a.createElement("li",{className:"breadcrumb-item"},"My Note App"),e.map((function(t,n){return n===e.length-1?r.a.createElement("li",{key:n,className:"breadcrumb-item active","aria-current":"page"},t):r.a.createElement("li",{key:n,className:"breadcrumb-item"},t)}))))}}]),t}(a.Component),h=n(7),f="SORT_TITLE_ASC",E="SORT_TITLE_DESC",y="SORT_DATE_ASC",v="SORT_DATE_DESC",g=n(31),O=n.n(g),S=(n(66),{apiKey:"AIzaSyCsvX7RdDeDk_Pu7oF0iljd9drSgyM6r5M",authDomain:"note-react-e1434.firebaseapp.com",databaseURL:"https://note-react-e1434.firebaseio.com",projectId:"note-react-e1434",storageBucket:"note-react-e1434.appspot.com",messagingSenderId:"575571829147",appId:"1:575571829147:web:2a0c70aa0f5f2e1822013e"});O.a.initializeApp(S);var N=O.a.database().ref("/noteData"),j=function(e,t,n){return{id:Date.now(),title:e,content:t,type:n}},D=function(){return j("Add done","Add new note done!","success")},w=function(){return j("Edit mode","Edit note done!","success")},M=function(){return j("Search mode","Search mode turned off!","info")},A=function(){return j("Sort mode","Sort mode turned off!","info")},C=function(){return j("Deleted!","Delete done!","success")},_=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).handleOpenEdit=function(e,t){e.key=t,n.props.enterEditMode(e)},n.handleDelete=function(e){window.confirm("Are you sure ?")&&(n.props.deleteFunc(e),n.props.throwMessage(C()))},n.renderNewFlag=function(e){if(Math.round((new Date).getTime()/1e3)-e<43200)return r.a.createElement("span",{className:"badge badge-danger badge-pill"},"new")},n.renderDateTime=function(e){var t=new Date(1e3*e);return r.a.createElement("abbr",{title:t},t.toLocaleDateString())},n.renderEditBtn=function(){return n.props.disableEditBtn?r.a.createElement("button",{type:"button",disabled:!0,className:"btn btn-sm btn-outline-secondary"},"Edit"):r.a.createElement("button",{type:"button",onClick:function(){return n.handleOpenEdit(n.props.data,n.props.idItem)},className:"btn btn-sm btn-outline-secondary"},"Edit")},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data,n=t.title,a=t.lastEditDate,c=t.content;return r.a.createElement("div",{className:"card shadow-sm"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},n," ",this.renderNewFlag(a)),r.a.createElement("p",{className:"card-text mb-1"},c),r.a.createElement("small",{className:"text-muted"},"Last updated:  ",this.renderDateTime(a)),r.a.createElement("div",{className:"btn-group mt-1 d-block text-right",role:"group"},this.renderEditBtn(),r.a.createElement("button",{onClick:function(){return e.handleDelete(e.props.idItem)},type:"button",className:"btn btn-sm btn-outline-secondary"},"Delete"))))}}]),t}(a.Component),k=Object(h.b)(null,(function(e){return{deleteFunc:function(t){return e((n=t,function(e){N.child(n).remove(),e({type:"DELETE",noteId:n})}));var n},enterEditMode:function(t){e({type:"TURN_EDIT_ON",itemEdit:t})},throwMessage:function(t){return e({type:"ADD_MESSAGE",message:t})}}}))(_),T=function(){return r.a.createElement("p",null,r.a.createElement("span",{className:"spinner-border text-secondary",role:"status"})," Loading")},R=function(e,t){var n=[];return Object.keys(e).forEach((function(t){n.push([t,e[t]])})),n.sort((function(e,n){return t(e[1],n[1])})),Object.fromEntries(n)},F=function(e){return R(e,(function(e,t){return e.title.localeCompare(t.title)}))},L=function(e){return R(e,(function(e,t){return t.title.localeCompare(e.title)}))},x=function(e){return R(e,(function(e,t){return t.lastEditDate-e.lastEditDate}))},I=function(e){return R(e,(function(e,t){return e.lastEditDate-t.lastEditDate}))},P=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getResultSearch=function(e,t){var n={};return Object.keys(t).forEach((function(a){-1===t[a].title.search(e)&&-1===t[a].content.search(e)||(n[a]=t[a])})),n},n.getResultSort=function(e,t){switch(e){case f:return F(t);case E:return L(t);case y:return x(t);case v:return I(t);default:return t}},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getNotes()}},{key:"render",value:function(){var e=this,t=this.props,n=t.noteData,a=t.isLoading,c=t.searchKey,o=t.sortMode;return null!==c&&(n=this.getResultSearch(c,n)),null!==o&&(n=this.getResultSort(o,n)),a?r.a.createElement("div",{className:"card-columns px-3 vh-100 d-flex align-items-center justify-content-center"},r.a.createElement(T,null)):0===Object.entries(n).length?r.a.createElement("div",{className:"card-columns px-3 vh-100 d-flex justify-content-center"},r.a.createElement("p",{className:"font-italic"},"There is 0 result.")):r.a.createElement("div",{className:"card-columns px-3 min-vh-100"},Object.keys(n).map((function(t){return r.a.createElement(k,{key:t,idItem:t,data:n[t],disableEditBtn:null!==e.props.isEditMode})})))}}]),t}(a.Component),U=Object(h.b)((function(e,t){return{noteData:e.noteData.data,isLoading:e.noteData.isLoading,isEditMode:e.appStatus.isEditMode,searchKey:e.appStatus.isSearchMode,sortMode:e.appStatus.isSortMode}}),(function(e){return{getNotes:function(){e((function(e){N.on("value",(function(t){e({type:"GET_ALL",payload:t.val()})}))}))}}}))(P),K=n(11),G=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleSearchSubmit=function(e){e.preventDefault(),n.state.searchKey&&""!==n.state.searchKey.trim()&&n.props.turnSearchOn(n.state.searchKey)},n.handleCancelSearch=function(e){e.target.reset(),n.props.cancelSearch(),n.setState({searchKey:""}),n.props.throwMessage(M())},n.handleCancelSort=function(){n.props.cancelSort(),n.props.throwMessage(A())},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.props.isLoading?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},"View Setting")),r.a.createElement("div",{className:"card-body d-flex align-items-center justify-content-center"},r.a.createElement(T,null))):r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},"View Setting")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"search-form"},r.a.createElement("form",{onSubmit:function(t){return e.handleSearchSubmit(t)},onReset:function(t){return e.handleCancelSearch(t)}},r.a.createElement("input",{required:!0,onChange:function(t){return e.handleChange(t)},name:"searchKey",type:"text",className:"form-control mr-2",placeholder:"Search key ..."}),r.a.createElement("div",{className:"float-right btn-group mt-2"},null!==this.props.searchKey?r.a.createElement("button",{type:"reset",className:"btn btn-secondary"},"Cancel"):null,r.a.createElement("button",{type:"submit",className:"order-last btn btn-secondary "},"Search"))),r.a.createElement("button",{className:"mt-2 btn btn-outline-secondary dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Sort"),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("button",{className:"dropdown-item btn",onClick:function(){return e.props.turnSortOn(f)}},"Title A-Z"),r.a.createElement("button",{className:"dropdown-item btn",onClick:function(){return e.props.turnSortOn(E)}},"Title Z-A"),r.a.createElement("button",{className:"dropdown-item btn",onClick:function(){return e.props.turnSortOn(y)}},"Date asc"),r.a.createElement("button",{className:"dropdown-item btn",onClick:function(){return e.props.turnSortOn(v)}},"Date desc"),r.a.createElement("div",{role:"separator",className:"dropdown-divider"}),r.a.createElement("button",{className:"dropdown-item btn",onClick:this.handleCancelSort},"Reset sort")))))}}]),t}(a.Component),B=Object(h.b)((function(e,t){return{isLoading:e.noteData.isLoading,searchKey:e.appStatus.isSearchMode}}),(function(e){return{turnSearchOn:function(t){return e({type:"TURN_SEARCH_ON",keyword:t})},cancelSearch:function(){return e({type:"TURN_SEARCH_OFF"})},cancelSort:function(){return e({type:"TURN_SORT_OFF"})},turnSortOn:function(t){return e({type:"TURN_SORT_ON",modeName:t})},throwMessage:function(t){return e({type:"ADD_MESSAGE",message:t})}}}))(G),V=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card my-2"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},"Action")),r.a.createElement("div",{className:"card-body"},r.a.createElement("button",{className:"btn btn-block btn-primary",onClick:this.props.showNoteForm},"Add"),r.a.createElement("button",{className:"btn btn-block btn-danger"},"Clear all")))}}]),t}(a.Component),H=Object(h.b)(null,(function(e){return{showNoteForm:function(){e({type:"TURN_ADD_ON"})}}}))(V),W=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleCancel=function(e){e.preventDefault(),null!=n.props.editModel?n.props.cancelEdit():n.props.cancelAdd()},n.handleChange=function(e){n.setState(Object(K.a)({},e.target.name,e.target.value))},n.handleSubmitAdd=function(e){try{var t=n.state,a=t.title,r=t.content;n.props.addNewFunc({title:a,content:r}),n.props.throwMessage(D()),e.target.reset(),n.setState({title:null,content:null})}catch(c){}},n.handleSubmitEdit=function(){try{var e=n.state,t=e.title,a=e.content;t.toString(),a.toString()}catch(o){t||(t=n.props.editModel.title),a||(a=n.props.editModel.content)}var r={},c=(new Date).getTime()/1e3;r[n.props.editModel.key]={title:t,content:a,lastEditDate:c},n.props.editSaveFunc(r),n.props.throwMessage(w())},n.handleSubmit=function(e){e.preventDefault(),null!=n.props.editModel?(n.handleSubmitEdit(),n.props.cancelEdit()):n.handleSubmitAdd(e)},n.renderValue=function(e){return e||""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t="Add";if(null!=this.props.editModel){var n=this.props.editModel,a=n.key,c=n.title,o=n.content;t="Edit"}return r.a.createElement("div",{className:"card my-2 border-primary"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h5",{className:"card-title"},t)),r.a.createElement("div",{className:"card-body"},r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{type:"hidden",value:this.renderValue(a)}),r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{required:!0,defaultValue:this.renderValue(c),type:"text",className:"form-control",name:"title",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("label",{htmlFor:"content"},"Content"),r.a.createElement("textarea",{required:!0,onChange:function(t){return e.handleChange(t)},rows:6,type:"text",className:"form-control",name:"content",defaultValue:this.renderValue(o)}),r.a.createElement("button",{type:"submit",className:"mt-3 btn btn-block btn-outline-primary"},"Save"),r.a.createElement("button",{type:"reset",className:"btn btn-block btn-outline-secondary"},"Reset form"),r.a.createElement("button",{onClick:function(t){return e.handleCancel(t)},className:"btn btn-block btn-light"},"Cancel"))))}}]),t}(a.Component),q=Object(h.b)((function(e){return{editModel:e.appStatus.isEditMode}}),(function(e){return{cancelAdd:function(){return e({type:"TURN_ADD_OFF"})},addNewFunc:function(t){return e((n=t,function(e){n.lastEditDate=(new Date).getTime()/1e3;var t={};t[N.push(n).getKey()]=n,e({type:"ADD_NEW",newItem:t})}));var n},editSaveFunc:function(t){return e((n=t,function(e){N.update(n),e({type:"EDIT",item:n})}));var n},cancelEdit:function(){return e({type:"TURN_EDIT_OFF"})},throwMessage:function(t){return e({type:"ADD_MESSAGE",message:t})}}}))(W),z=n(33),J=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).renderClearAllBtn=function(){return r.a.createElement("button",{onClick:function(){return n.props.closeAllMessages()},type:"button",className:"btn btn-warning btn-sm"},"Clear all")},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.messages;return r.a.createElement(z.b,{position:"bottom-right"},0===t.length?null:this.renderClearAllBtn(),t.map((function(t){return r.a.createElement(z.a,{key:t.id,type:t.type,onDismiss:function(){return e.props.closeFunc(t.id)},timeout:4e3},r.a.createElement("h5",null,t.title),r.a.createElement("div",null,t.content))})))}}]),t}(a.Component),Z=Object(h.b)((function(e){return{messages:e.messages}}),(function(e){return{closeFunc:function(t){return e({type:"CLOSE_MESSAGE",messageId:t})},closeAllMessages:function(){return e({type:"CLOSE_ALL_MESSAGES"})}}}))(J),X=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=[];return null!==this.props.status.isSearchMode&&e.push('Search "'+this.props.status.isSearchMode+'"'),null!==this.props.status.isSortMode&&e.push("Sort"),this.props.status.isAddMode&&e.push("Add"),null!==this.props.status.isEditMode&&e.push("Edit"),r.a.createElement("div",{className:"bg-light text-dark"},r.a.createElement(m,null),r.a.createElement(Z,null),r.a.createElement("div",{className:"container mt-3"},r.a.createElement("div",{className:"row flex-column-reverse flex-md-row"},r.a.createElement("div",{className:"col-sm-8 col-12 mb-3 px-2"},r.a.createElement("div",{className:"bg-white border rounded shadow-sm"},r.a.createElement(b,{address:e}),r.a.createElement(U,null))),r.a.createElement("div",{className:"col-sm-4 px-2"},r.a.createElement(B,null),this.props.status.isAddMode||null!=this.props.status.isEditMode?r.a.createElement(q,null):r.a.createElement(H,null)))),r.a.createElement(p,null))}}]),t}(a.Component),Y=Object(h.b)((function(e,t){return{status:e.appStatus}}))(X);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=n(12);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(K.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te={isLoading:!0,data:{}};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){Object(K.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re={isAddMode:!1,isEditMode:null,isSearchMode:null,isSortMode:null},ce=n(54),oe=[],se=Object($.c)({noteData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,n=e.data;switch(t.type){case"GET_ALL":return ee({},e,{data:t.payload,isLoading:!1});case"ADD_NEW":return ee({},e,{data:Object.assign(t.newItem,e.data)});case"DELETE":return Object.keys(n).filter((function(e){return e===t.noteId})).forEach((function(e){return delete n[e]})),ee({},e,{data:n});case"EDIT":var a=Object.keys(t.item)[0];return n[a]=t.item[a],ee({},e,{data:n});default:return e}},appStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TURN_ADD_ON":return ae({},e,{isAddMode:!0});case"TURN_ADD_OFF":return ae({},e,{isAddMode:!1});case"TURN_EDIT_OFF":return ae({},e,{isEditMode:null});case"TURN_EDIT_ON":return ae({},e,{isEditMode:t.itemEdit,isAddMode:!1});case"TURN_SEARCH_OFF":return ae({},e,{isSearchMode:null});case"TURN_SEARCH_ON":return ae({},e,{isSearchMode:t.keyword});case"TURN_SORT_ON":return ae({},e,{isSortMode:t.modeName});case"TURN_SORT_OFF":return ae({},e,{isSortMode:null});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":return[].concat(Object(ce.a)(e.slice(-4)),[t.message]);case"CLOSE_MESSAGE":return e.filter((function(e){return e.id!==t.messageId}));case"CLOSE_ALL_MESSAGES":return[];default:return e}}}),le=n(53),ie=Object($.d)(se,Object($.a)(le.a));o.a.render(r.a.createElement(h.a,{store:ie},r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},55:function(e,t,n){e.exports=n(120)},60:function(e,t,n){},61:function(e,t,n){}},[[55,1,2]]]);
//# sourceMappingURL=main.d1eaf4c2.chunk.js.map